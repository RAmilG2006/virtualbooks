<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registro - Virtual Books</title>
    <link rel="shortcut icon" th:href="@{/img/book.png}" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="w-full h-screen">
<div class="w-full h-screen p-2 flex flex-col bg-white lg:flex-row">

    <!-- Contenedor del formulario -->
    <div class="flex flex-col w-full h-full lg:w-3/5 lg:order-2">
        <div class="flex flex-col items-center w-full h-full lg:justify-center">
            <img th:src="@{/img/VirtualBooks.png}" alt="Virtual Books Logo" class="w-48 h-auto" />
            <h1 class="text-red-500 font-bold text-2xl mb-10 mt-10">Registrarse</h1>

            <!-- ERRORES GENERALES -->
            <div th:if="${errorMessage}" class="w-full lg:w-3/5 bg-red-100 text-red-700 p-4 rounded mb-4 text-sm">
                <span th:text="${errorMessage}"></span>
            </div>

            <!-- FORMULARIO -->
            <form th:action="@{/auth/register}" th:object="${user}" method="POST"
                  class="w-4/5 lg:flex flex-col items-center max-w-lg mx-auto bg-white shadow-lg rounded-lg p-8 space-y-4">

                <h2 class="text-2xl font-bold text-center text-gray-800 mb-4">Crear Cuenta</h2>

                <!-- Campo Nombres -->
                <input type="text" th:field="*{nombre}" placeholder="Nombres"
                       class="block w-full p-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent mb-2 lg:w-3/5" />
                <div th:if="${#fields.hasErrors('nombre')}" class="w-full lg:w-3/5 text-red-500 text-sm mb-2 -mt-1">
                    <span th:errors="*{nombre}"></span>
                </div>

                <!-- Campo Apellidos -->
                <input type="text" th:field="*{apellido}" placeholder="Apellidos"
                       class="block w-full p-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent mb-2 lg:w-3/5" />
                <div th:if="${#fields.hasErrors('apellido')}" class="w-full lg:w-3/5 text-red-500 text-sm mb-2 -mt-1">
                    <span th:errors="*{apellido}"></span>
                </div>

                <!-- Campo Email -->
                <input type="email" th:field="*{email}" placeholder="Email"
                       class="block w-full p-2 border border-gray-300 rounded-md outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent mb-2 lg:w-3/5" />
                <div th:if="${#fields.hasErrors('email')}" class="w-full lg:w-3/5 text-red-500 text-sm mb-2 -mt-1">
                    <span th:errors="*{email}"></span>
                </div>

                <!-- Campo Contraseña -->
                <div class="relative w-full lg:w-3/5 mb-2">
                    <input type="password" th:field="*{password}" id="password" placeholder="Contraseña"
                           class="block w-full p-2 border border-gray-300 rounded-md pr-10 outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                    <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer"
                            onclick="togglePassword('password')">
                        <svg class="h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </button>
                </div>
                <div th:if="${#fields.hasErrors('password')}" class="w-full lg:w-3/5 text-red-500 text-sm mb-2 -mt-1">
                    <span th:errors="*{password}"></span>
                </div>

                <!-- Campo Confirmar Contraseña -->
                <div class="relative w-full lg:w-3/5 mb-2">
                    <input type="password" th:field="*{confirmPassword}" id="confirmPassword" placeholder="Confirmar Contraseña"
                           class="block w-full p-2 border border-gray-300 rounded-md pr-10 outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent" />
                    <button type="button" class="absolute inset-y-0 right-0 flex items-center pr-3 cursor-pointer"
                            onclick="togglePassword('confirmPassword')">
                        <svg class="h-5 w-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                        </svg>
                    </button>
                </div>
                <div th:if="${#fields.hasErrors('confirmPassword')}" class="w-full lg:w-3/5 text-red-500 text-sm mb-2 -mt-1">
                    <span th:errors="*{confirmPassword}"></span>
                </div>

                <!-- Botón Registrarse -->
                <button type="submit"
                        class="w-full p-2 rounded-md bg-red-500 text-white font-bold lg:w-3/5 hover:bg-red-600 transition-colors duration-200">
                    Registrarse
                </button>

            </form>

            <p class="my-8">
                ¿Ya posees una cuenta?
                <a th:href="@{/auth/login}" class="text-red-500 font-bold hover:text-red-700 transition-colors">Iniciar Sesión</a>
            </p>
        </div>
        <p class="flex grow items-end text-gray-600 text-center lg:block p-4">
            © 2025 VirtualBooks. Todos los derechos reservados.
        </p>
    </div>

    <!-- Imagen lateral -->
    <div class="hidden lg:block bg-red-500 w-2/5 rounded-xl p-11 order-1 relative">
        <div class="lg:bg-black opacity-20 w-full h-full rounded-xl absolute inset-0"></div>
        <div class="w-full h-full relative">
            <img th:src="@{/img/books.jpg}" alt="Libros" class="w-full h-full object-cover rounded-xl" />
        </div>
    </div>

</div>

<script>
    function togglePassword(fieldId) {
        const passwordInput = document.getElementById(fieldId);
        passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
    }
</script>
</body>
</html>
